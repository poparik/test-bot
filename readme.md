# Бот-Модератор для Telegram

## Описание
Бот-модератор для Telegram групп, который автоматически отслеживает подозрительные сообщения, содержащие запрещенные слова, и требует от отправителя подтверждения, что он не является роботом. Если пользователь не проходит верификацию в течение указанного времени, он добавляется в черный список и блокируется.

## Основные возможности
- Автоматическое обнаружение подозрительных сообщений с запрещенными словами
- Система верификации пользователей с помощью кнопки "Я не робот"
- Ведение черного списка нарушителей
- Команды для администраторов по управлению черным списком
- Возможность разбанить пользователей

## Требования
- Python 3.12.10+
- aiogram 3.20.0+
- tortoise-orm 0.20.0+
- python-dotenv 1.0.1+
- aiosqlite 0.19.0+

## Установка и настройка

### 1. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 2. Настройка .env файла
Создайте файл `.env` в корневой директории проекта и добавьте в него токен вашего бота:
```
BOT_TOKEN=ваш_токен_бота_здесь
```

### 5. Запуск бота
```
python bot.py
```

## Использование

### Команды бота
- `/status` - Показать статус бота
- `/blacklist` - Показать черный список (только для администраторов)
- `/unban <user_id>` - Удалить пользователя из черного списка и разбанить (только для администраторов)
- `/clear_blacklist` - Очистить черный список (только для создателя чата)
- `/help` - Показать справку по командам

### Как работает верификация
1. Когда пользователь отправляет сообщение, содержащее одно из запрещенных слов, бот отправляет запрос на верификацию
2. Пользователь должен нажать кнопку "Я не робот" в течение установленного времени (по умолчанию 60 секунд)
3. Если пользователь не проходит верификацию вовремя, он добавляется в черный список и блокируется в чате

## Структура проекта
- `bot.py` - Основной файл бота с логикой обработки сообщений и командами
- `config.py` - Конфигурационный файл с настройками и списком запрещенных слов
- `models.py` - Модели базы данных (BlacklistedUser, PendingVerification)
- `.env` - Файл с переменными окружения (токен бота)
- `requirements.txt` - Список зависимостей

## Настройка
В файле `config.py` вы можете изменить следующие параметры:
- `DATABASE_URL` - URL для подключения к базе данных (по умолчанию используется SQLite)
- `VERIFICATION_TIMEOUT` - Время ожидания верификации в секундах (по умолчанию 60 секунд)
- `FORBIDDEN_WORDS` - Список запрещенных слов, которые будут триггерить проверку

## Примечание по безопасности
- Для корректной работы бота необходимо сделать его администратором группы с правами блокировки пользователей
- Рекомендуется регулярно проверять и обновлять список запрещенных слов в `config.py`